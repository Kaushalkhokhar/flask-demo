(this["webpackJsonpflask-react-app"]=this["webpackJsonpflask-react-app"]||[]).push([[0],{16:function(e,t,n){e.exports={form:"Form_form__iqRZI"}},17:function(e,t,n){e.exports={backdrop:"Modal_backdrop__3WCoP",overlays:"Modal_overlays__15wll",content:"Modal_content__2ChuF"}},22:function(e,t,n){},25:function(e,t,n){e.exports={card:"Card_card__1HVZg"}},26:function(e,t,n){e.exports={button:"Button_button__33K7C"}},27:function(e,t,n){e.exports={spinner:"LoadingSpinner_spinner__3c9GE"}},28:function(e,t,n){e.exports={form:"Login_form__35a2Y"}},29:function(e,t,n){e.exports={form:"UserForm_form__3afJA"}},4:function(e,t,n){e.exports={"form-control":"Input_form-control__1lNF8",invalid:"Input_invalid__Trpmy","error-text":"Input_error-text__2t8DD","valid-text":"Input_valid-text__2XMyJ","info-text":"Input_info-text__2a93t"}},41:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(14),r=n.n(c),o=n(7),i=n(3),l=n(0),u=s.a.createContext({token:!1,tokenHandler:function(e){}}),j=function(e){var t=Object(a.useState)(!1),n=Object(i.a)(t,2),s=n[0],c=n[1],r=Object(a.useCallback)((function(e){c(e)}),[]);return Object(l.jsx)(u.Provider,{value:{token:s,tokenHandler:r},children:e.children})},d=u,b=(n(22),n(2)),O=n(6),p=n.n(O),f=function(){var e=Object(a.useContext)(d).token;return Object(l.jsx)("nav",{className:p.a.nav,children:Object(l.jsxs)("ul",{className:p.a.nav__links,children:[Object(l.jsx)("li",{className:p.a.nav__item,children:Object(l.jsx)(o.c,{className:p.a.nav__link,activeClassName:p.a.active,to:"/home",children:"Home"})}),Object(l.jsx)("li",{children:Object(l.jsx)(o.c,{className:p.a.nav__link,activeClassName:p.a.active,to:"/about",children:"About"})}),Object(l.jsx)("li",{children:Object(l.jsx)(o.c,{className:p.a.nav__link,activeClassName:p.a.active,to:"/users",children:"Users"})}),Object(l.jsx)("li",{children:Object(l.jsx)(o.c,{className:p.a.nav__link,activeClassName:p.a.active,to:"/register",children:"Register"})}),!e&&Object(l.jsx)("li",{children:Object(l.jsx)(o.c,{className:p.a.nav__link,activeClassName:p.a.active,to:"/login",children:"Login"})}),e&&Object(l.jsx)(o.c,{className:p.a.nav__link,activeClassName:p.a.active,to:"/logout",children:"Logout"})]})})},x=function(){return Object(l.jsx)("header",{children:Object(l.jsx)(f,{})})},m=function(e){return Object(l.jsxs)(a.Fragment,{children:[Object(l.jsx)(x,{}),Object(l.jsx)("div",{children:e.children})]})},h=function(){return Object(l.jsx)("h2",{children:"This is home page"})},v=n(25),g=n.n(v),_=function(e){return Object(l.jsx)("div",{className:"".concat(g.a.card," ").concat(e.className),children:e.children})},k=n(26),I=n.n(k),C=function(e){return Object(l.jsx)("button",{className:e.className||I.a.button,type:e.type||"button",onClick:e.onClick,disabled:e.disabled||!1,children:e.children})},w=n(17),N=n.n(w),S=function(e){return Object(l.jsx)("div",{className:N.a.backdrop,onClick:e.onClick,children:e.children})},V=function(e){return Object(l.jsxs)(_,{className:N.a.overlays,children:[Object(l.jsx)("header",{children:Object(l.jsx)("h2",{children:e.title})}),Object(l.jsx)("div",{className:N.a.content,children:e.content}),Object(l.jsx)("footer",{children:Object(l.jsx)(C,{onClick:e.onClick,children:"Close"})})]})},P=function(e){return Object(l.jsxs)(a.Fragment,{children:[r.a.createPortal(Object(l.jsx)(S,{onClick:e.onClick}),document.getElementById("backdrop-root")),r.a.createPortal(Object(l.jsx)(V,{title:e.title,content:e.content,onClick:e.onClick}),document.getElementById("overlays-root"))]})},y=n(27),E=n.n(y),D=function(){return Object(l.jsx)("div",{className:E.a.spinner})},F=function(){var e=Object(a.useState)(""),t=Object(i.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(!1),r=Object(i.a)(c,2),o=r[0],l=r[1],u=Object(a.useState)(!1),j=Object(i.a)(u,2),d=j[0],b=j[1];return{enteredValue:n,isTouched:o,deFocused:d,inputChangeHandler:function(e){s(e.target.value),l(!0),b(!1)},inputBlurHandler:function(){l(!0),b(!0)},reset:Object(a.useCallback)((function(){s(""),l(!1),b(!1)}),[])}},R=n(12),H=n.n(R),T=n(15),L=function(){var e=Object(a.useState)(!1),t=Object(i.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)(!1),r=Object(i.a)(c,2),o=r[0],l=r[1],u=Object(a.useState)(!1),j=Object(i.a)(u,2),d=j[0],b=j[1],O=Object(a.useState)({}),p=Object(i.a)(O,2),f=p[0],x=p[1];return{inputIsValid:n,errorResponse:o,isLoading:d,successResponse:f,sendInput:Object(a.useCallback)(function(){var e=Object(T.a)(H.a.mark((function e(t,n){var a,c,r,o,i=arguments;return H.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.length>2&&void 0!==i[2]?i[2]:null,s(!1),l(!1),b(!0),e.prev=4,e.next=7,fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({value:a,type:n})});case 7:if((c=e.sent).ok){e.next=17;break}if(401!==c.status){e.next=16;break}return e.next=12,c.json();case 12:throw r=e.sent,new Error(r.data.message);case 16:throw new Error("Something went wrong. Please try again");case 17:return e.next=19,c.json();case 19:o=e.sent,x(o.data),s(!0),e.next=29;break;case 24:e.prev=24,e.t0=e.catch(4),l(e.t0.message),s(!1),x("");case 29:b(!1);case 30:case"end":return e.stop()}}),e,null,[[4,24]])})));return function(t,n){return e.apply(this,arguments)}}(),[]),setValidation:Object(a.useCallback)((function(e){s(e)}),[]),resetState:Object(a.useCallback)((function(){s(!1),l(!1),b(!1)}),[])}},B=n(4),M=n.n(B),J=function(e){var t=F(),n=t.enteredValue,s=t.isTouched,c=t.deFocused,r=t.inputChangeHandler,o=t.inputBlurHandler,i=L(),u=i.inputIsValid,j=i.errorResponse,d=i.successResponse,b=i.sendInput,O=e.onPassEmailData,p=e.url;Object(a.useEffect)((function(){if(s){var e=setTimeout((function(){b(p,"email",n)}),500);return function(){clearTimeout(e)}}}),[s,n,p,b]),Object(a.useEffect)((function(){O({emailInputValue:n,emailInputIsValid:u})}),[O,n,u]);var f=!u&&s?"".concat(M.a["form-control"]," ").concat(M.a.invalid):M.a["form-control"];return Object(l.jsxs)("div",{className:f,children:[Object(l.jsx)("label",{htmlFor:"email",children:"Your E-mail"}),Object(l.jsx)("input",{type:"email",id:"email",onChange:r,onBlur:o,value:n,placeholder:"Email"}),j&&!c&&Object(l.jsx)("p",{className:M.a["info-text"],children:j}),j&&c&&Object(l.jsx)("p",{className:M.a["error-text"],children:j}),e.register&&u&&Object(l.jsx)("p",{className:M.a["valid-text"],children:d.message})]})},q=function(e){var t=F(),n=t.enteredValue,s=t.isTouched,c=t.deFocused,r=t.inputChangeHandler,o=t.inputBlurHandler,i=L(),u=i.inputIsValid,j=i.errorResponse,d=i.successResponse,b=i.sendInput,O=e.onPassPasswordData,p=e.url;Object(a.useEffect)((function(){if(s){var e=setTimeout((function(){b(p,"password",n)}),500);return function(){clearTimeout(e)}}}),[s,n,p,b]),Object(a.useEffect)((function(){O({passwordInputValue:n,passwordInputIsValid:u})}),[O,n,u]);var f=!u&&s?"".concat(M.a["form-control"]," ").concat(M.a.Valid):M.a["form-control"];return Object(l.jsxs)("div",{className:f,children:[Object(l.jsx)("label",{htmlFor:"password",children:"Your E-mail"}),Object(l.jsx)("input",{type:"password",id:"password",onChange:r,onBlur:o,value:n,placeholder:"Password"}),j&&!c&&Object(l.jsx)("p",{className:M.a["info-text"],children:j}),j&&c&&Object(l.jsx)("p",{className:M.a["error-text"],children:j}),e.register&&u&&Object(l.jsx)("p",{className:M.a["valid-text"],children:d.message})]})},A=n(28),U=n.n(A),Y=function(){var e=Object(b.g)(),t=Object(a.useContext)(d),n=Object(a.useState)({}),s=Object(i.a)(n,2),c=s[0],r=s[1],u=Object(a.useState)({}),j=Object(i.a)(u,2),O=j[0],p=j[1],f="/api/login",x=L(),m=x.errorResponse,h=x.successResponse,v=x.isLoading,g=x.sendInput,k=x.resetState,I=Object(a.useCallback)((function(e){r(e)}),[]),w=Object(a.useCallback)((function(e){p(e)}),[]),N=!1;c.emailInputIsValid&&O.passwordInputIsValid&&(N=!0);var S=t.token,V=t.tokenHandler;Object(a.useEffect)((function(){S?e.push("/home"):V(h.payload)}),[h,S,e,V]);return Object(l.jsxs)(a.Fragment,{children:[!v&&Object(l.jsx)(_,{className:U.a.form,children:Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={email:c.emailInputValue,password:O.passwordInputValue};g(f,"submit",t)},children:[Object(l.jsx)(J,{onPassEmailData:I,url:f}),Object(l.jsx)(q,{onPassPasswordData:w,url:f}),Object(l.jsx)(C,{type:"submit",disabled:!N,children:"Login"}),Object(l.jsx)(o.b,{to:"/reset_request",children:"Forgot Password?"})]})}),v&&!m&&Object(l.jsx)(D,{}),!v&&m&&Object(l.jsx)(P,{onClick:function(){k()},title:"Error Message",content:m})]})},Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=Object(a.useState)({}),s=Object(i.a)(n,2),c=s[0],r=s[1],o=Object(a.useState)(!1),l=Object(i.a)(o,2),u=l[0],j=l[1],d=Object(a.useState)(!1),b=Object(i.a)(d,2),O=b[0],p=b[1],f=Object(a.useState)(!1),x=Object(i.a)(f,2),m=x[0],h=x[1],v=Object(a.useCallback)(Object(T.a)(H.a.mark((function n(){var a,s,c;return H.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return p(!0),r({}),j(!1),h(!1),n.next=6,fetch(e,{headers:{"x-access-token":t}});case 6:if((a=n.sent).ok){n.next=18;break}if(401!==a.status){n.next=15;break}return n.next=11,a.json();case 11:s=n.sent,j(s.data.message),n.next=16;break;case 15:j("Something went wrong. Please try again");case 16:n.next=23;break;case 18:return n.next=20,a.json();case 20:c=n.sent,r(c.data),h(!0);case 23:p(!1);case 24:case"end":return n.stop()}}),n)}))),[e,t]),g=function(){p(!1),h(!1),j(!1)};return{data:c,error:u,isLoading:O,isSuccess:m,fetchData:v,resetState:g}},z=function(){var e=Object(a.useContext)(d),t=Z("/api/about",e.token),n=t.data,s=t.error,c=t.isLoading,r=t.isSuccess,o=t.resetState,i=t.fetchData;Object(a.useEffect)((function(){i()}),[i]);return Object(l.jsxs)(a.Fragment,{children:[r&&Object(l.jsx)("p",{children:n.message}),c&&Object(l.jsx)(D,{}),s&&Object(l.jsx)(P,{onClick:function(){o()},title:"Error Message",content:s})]})},G=function(e){var t=F(),n=t.enteredValue,s=t.isTouched,c=t.deFocused,r=t.inputChangeHandler,o=t.inputBlurHandler,i=L(),u=i.inputIsValid,j=i.errorResponse,d=i.successResponse,b=i.sendInput,O=e.onPassNameData,p=e.url;Object(a.useEffect)((function(){if(s){var e=setTimeout((function(){b(p,"username",n)}),500);return function(){clearTimeout(e)}}}),[n,s,p,b]),Object(a.useEffect)((function(){O({nameInputValue:n,nameInputIsValid:u})}),[O,n,u]);var f=!u&&s?"".concat(M.a["form-control"]," ").concat(M.a.invalid):M.a["form-control"];return Object(l.jsxs)("div",{className:f,children:[Object(l.jsx)("label",{htmlFor:"name",children:"Your Name"}),Object(l.jsx)("input",{type:"text",id:"name",onChange:r,onBlur:o,value:n,placeholder:"Username"}),j&&!c&&Object(l.jsx)("p",{className:M.a["info-text"],children:j}),j&&c&&Object(l.jsx)("p",{className:M.a["error-text"],children:j}),e.register&&u&&Object(l.jsx)("p",{className:M.a["valid-text"],children:d.message})]})},K=function(e){var t=F(),n=t.enteredValue,s=t.isTouched,c=t.deFocused,r=t.inputChangeHandler,o=t.inputBlurHandler,i=e.onPassConfPasswordData,u=!1;e.passwordInputValue===n&&(u=!0),Object(a.useEffect)((function(){i({confPasswordInputIsValid:u})}),[i,u]);var j=!u&&s?"".concat(M.a["form-control"]," ").concat(M.a.invalid):M.a["form-control"];return Object(l.jsxs)("div",{className:j,children:[Object(l.jsx)("label",{htmlFor:"confPassword",children:"Your E-mail"}),Object(l.jsx)("input",{type:"password",id:"confPassword",onChange:r,onBlur:o,value:n,placeholder:"Confirm Password"}),!c&&s&&!u&&Object(l.jsx)("p",{className:M.a["info-text"],children:"Password and confirm password must be same"}),c&&s&&!u&&Object(l.jsx)("p",{className:M.a["error-text"],children:"Password and confirm password must be same"}),u&&n.trim().length>0&&Object(l.jsx)("p",{className:M.a["valid-text"],children:"Password and confirm password matched."})]})},W=n(29),X=n.n(W),Q=function(e){var t=Object(a.useState)({}),n=Object(i.a)(t,2),s=n[0],c=n[1],r=Object(a.useState)({}),o=Object(i.a)(r,2),u=o[0],j=o[1],d=Object(a.useState)({}),b=Object(i.a)(d,2),O=b[0],p=b[1],f=Object(a.useState)({}),x=Object(i.a)(f,2),m=x[0],h=x[1],v="/api/register",g=Object(a.useCallback)((function(e){c(e)}),[]),k=Object(a.useCallback)((function(e){j(e)}),[]),I=Object(a.useCallback)((function(e){p(e)}),[]),w=Object(a.useCallback)((function(e){h(e)}),[]),N=!1;s.nameInputIsValid&&u.emailInputIsValid&&O.passwordInputIsValid&&m.confPasswordInputIsValid&&(N=!0);return Object(l.jsx)(_,{className:X.a.form,children:Object(l.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n={username:s.nameInputValue,email:u.emailInputValue,password:O.passwordInputValue};e.onAddUser(n)},children:[Object(l.jsx)(G,{onPassNameData:g,url:v,register:!0}),Object(l.jsx)(J,{onPassEmailData:k,url:v,register:!0}),Object(l.jsx)(q,{onPassPasswordData:I,url:v,register:!0}),Object(l.jsx)(K,{onPassConfPasswordData:w,passwordInputValue:O.passwordInputValue}),Object(l.jsx)(C,{disabled:!N,type:"submit",children:"Submit"})]})})},$=function(e){var t=Object(b.g)(),n=L(),s=n.inputIsValid,c=n.errorResponse,r=n.isLoading,o=n.sendInput,i=n.resetState,u=Object(a.useCallback)((function(e){o("/api/register","submit",e)}),[o]);Object(a.useEffect)((function(){!c&&s&&t.push("/login")}),[c,s,t]);return Object(l.jsxs)(a.Fragment,{children:[!r&&Object(l.jsx)(Q,{onAddUser:u}),r&&!c&&Object(l.jsx)(D,{}),c&&Object(l.jsx)(P,{onClick:function(){i()},title:"Error Message",content:c})]})},ee=function(e){var t=e.users.map((function(e){return Object(l.jsxs)("li",{children:[e.username,", ",e.email]},e.username)}));return Object(l.jsx)("ul",{children:t})},te=function(){var e=Z("/api/users"),t=e.data,n=e.error,s=e.isLoading,c=e.isSuccess,r=e.fetchData;return Object(a.useEffect)((function(){r()}),[r]),Object(l.jsxs)(a.Fragment,{children:[c&&0===t.payload.length&&Object(l.jsx)("p",{children:"No users are added"}),c&&t.payload.length>0&&Object(l.jsx)(ee,{users:t.payload}),s&&!n&&Object(l.jsx)(D,{}),!s&&n&&Object(l.jsx)("p",{children:n})]})},ne=function(){var e=Object(a.useContext)(d),t=Object(b.g)(),n=e.tokenHandler;return Object(a.useEffect)((function(){n(!1),t.push("/home")}),[n,t]),null},ae=n(16),se=n.n(ae),ce=function(){var e=Object(a.useState)({}),t=Object(i.a)(e,2),n=t[0],s=t[1],c=Object(b.g)(),r="/api/reset_request",o=L(),u=o.inputIsValid,j=o.errorResponse,d=o.isLoading,O=o.successResponse,p=o.sendInput,f=o.resetState,x=!1;n.emailInputIsValid&&(x=!0);var m=Object(a.useCallback)((function(e){s(e)}),[]),h=function(){f(),u&&c.push("/login")};return Object(l.jsxs)(a.Fragment,{children:[Object(l.jsx)(_,{className:se.a.form,children:Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={email:n.emailInputValue};p(r,"submit",t)},children:[Object(l.jsx)(J,{onPassEmailData:m,url:r}),Object(l.jsx)(C,{type:"submit",disabled:!x,children:"Send Request"})]})}),d&&!j&&Object(l.jsx)(D,{}),!d&&j&&Object(l.jsx)(P,{onClick:h,title:"Error Message",content:j}),!d&&u&&Object(l.jsx)(P,{onClick:h,title:"Success Message",content:O.message})]})},re=function(){var e=Object(a.useState)({}),t=Object(i.a)(e,2),n=t[0],s=t[1],c=Object(a.useState)({}),r=Object(i.a)(c,2),o=r[0],u=r[1],j=Object(b.h)(),d=Object(b.g)(),O="/api/reset_password",p=L(),f=p.inputIsValid,x=p.errorResponse,m=p.isLoading,h=p.successResponse,v=p.sendInput,g=p.resetState,k=Object(a.useCallback)((function(e){s(e)}),[]),I=Object(a.useCallback)((function(e){u(e)}),[]),w=!1;console.log(n.passwordInputIsValid),console.log(o.confPasswordInputIsValid),n.passwordInputIsValid&&o.confPasswordInputIsValid&&(w=!0);var N=function(){g(),f&&d.push("/login")};return Object(l.jsxs)(a.Fragment,{children:[Object(l.jsx)(_,{className:se.a.form,children:Object(l.jsxs)("form",{onSubmit:function(e){e.preventDefault();var t={password:n.passwordInputValue,token:j.token};v(O,"submit",t)},children:[Object(l.jsx)(q,{onPassPasswordData:k,url:O}),Object(l.jsx)(K,{onPassConfPasswordData:I,passwordInputValue:n.passwordInputValue}),Object(l.jsx)(C,{disabled:!w,type:"submit",children:"Submit"})]})}),m&&!x&&Object(l.jsx)(D,{}),!m&&x&&Object(l.jsx)(P,{onClick:N,title:"Error Message",content:x}),!m&&f&&Object(l.jsx)(P,{onClick:N,title:"Success Message",content:h.message})]})},oe=function(){return Object(l.jsx)("div",{className:"centered",children:"Page not found"})};var ie=function(){return Object(l.jsx)(m,{children:Object(l.jsxs)(b.d,{children:[Object(l.jsx)(b.b,{path:"/",exact:!0,children:Object(l.jsx)(b.a,{to:"/home"})}),Object(l.jsx)(b.b,{path:"/home",children:Object(l.jsx)(h,{})}),Object(l.jsx)(b.b,{path:"/about",children:Object(l.jsx)(z,{})}),Object(l.jsx)(b.b,{path:"/users",children:Object(l.jsx)(te,{})}),Object(l.jsx)(b.b,{path:"/register",children:Object(l.jsx)($,{})}),Object(l.jsx)(b.b,{path:"/login",children:Object(l.jsx)(Y,{})}),Object(l.jsx)(b.b,{path:"/logout",children:Object(l.jsx)(ne,{})}),Object(l.jsx)(b.b,{path:"/reset_request",children:Object(l.jsx)(ce,{})}),Object(l.jsx)(b.b,{path:"/reset_password/:token",children:Object(l.jsx)(re,{})}),Object(l.jsx)(b.b,{path:"*",children:Object(l.jsx)(oe,{})})]})})};r.a.render(Object(l.jsx)(o.a,{children:Object(l.jsx)(j,{children:Object(l.jsx)(ie,{})})}),document.getElementById("root"))},6:function(e,t,n){e.exports={nav:"Navbar_nav__38nAk",nav__links:"Navbar_nav__links__1yPNd",nav__link:"Navbar_nav__link__39zw5",active:"Navbar_active__2hOJL"}}},[[41,1,2]]]);
//# sourceMappingURL=main.60474b77.chunk.js.map